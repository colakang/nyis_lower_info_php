//     Copyright (c) 2010-2012 Robert Kieffer
(function(){function t(t,n,e){var r=n&&e||0,o=0;for(n=n||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(n[r+o++]=d[t])});16>o;)n[r+o++]=0;return n}function n(t,n){var e=n||0,r=l;return r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]}function e(t,e,r){var o=e&&r||0,i=e||[];t=t||{};var u=null!=t.clockseq?t.clockseq:v,a=null!=t.msecs?t.msecs:(new Date).getTime(),c=null!=t.nsecs?t.nsecs:y+1,s=a-w+(c-y)/1e4;if(0>s&&null==t.clockseq&&(u=u+1&16383),(0>s||a>w)&&null==t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");w=a,y=c,v=u,a+=122192928e5;var f=(1e4*(268435455&a)+c)%4294967296;i[o++]=f>>>24&255,i[o++]=f>>>16&255,i[o++]=f>>>8&255,i[o++]=255&f;var l=a/4294967296*1e4&268435455;i[o++]=l>>>8&255,i[o++]=255&l,i[o++]=l>>>24&15|16,i[o++]=l>>>16&255,i[o++]=u>>>8|128,i[o++]=255&u;for(var d=t.node||g,h=0;6>h;h++)i[o+h]=d[h];return e?e:n(i)}function r(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"==t?new f(16):null,t=null),t=t||{};var u=t.random||(t.rng||o)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e)for(var a=0;16>a;a++)e[i+a]=u[a];return e||n(u)}var o,i=this;if("function"==typeof i.require)try{var u=i.require("crypto").randomBytes;o=u&&function(){return u(16)}}catch(a){}if(!o&&i.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);o=function(){return crypto.getRandomValues(c),c}}if(!o){var s=new Array(16);o=function(){for(var t,n=0;16>n;n++)0===(3&n)&&(t=4294967296*Math.random()),s[n]=t>>>((3&n)<<3)&255;return s}}for(var f="function"==typeof i.Buffer?i.Buffer:Array,l=[],d={},h=0;256>h;h++)l[h]=(h+256).toString(16).substr(1),d[l[h]]=h;var p=o(),g=[1|p[0],p[1],p[2],p[3],p[4],p[5]],v=16383&(p[6]<<8|p[7]),w=0,y=0,m=r;if(m.v1=e,m.v4=r,m.parse=t,m.unparse=n,m.BufferClass=f,"function"==typeof define&&define.amd)define(function(){return m});else if("undefined"!=typeof module&&module.exports)module.exports=m;else{var _=i.uuid;m.noConflict=function(){return i.uuid=_,m},i.uuid=m}}).call(this),function(t){"use strict";var n,e=t.Base64,r="2.1.7";"undefined"!=typeof module&&module.exports&&(n=require("buffer").Buffer);var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){for(var n={},e=0,r=t.length;r>e;e++)n[t.charAt(e)]=e;return n}(o),u=String.fromCharCode,a=function(t){if(t.length<2){var n=t.charCodeAt(0);return 128>n?t:2048>n?u(192|n>>>6)+u(128|63&n):u(224|n>>>12&15)+u(128|n>>>6&63)+u(128|63&n)}var n=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return u(240|n>>>18&7)+u(128|n>>>12&63)+u(128|n>>>6&63)+u(128|63&n)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(t){return t.replace(c,a)},f=function(t){var n=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[o.charAt(e>>>18),o.charAt(e>>>12&63),n>=2?"=":o.charAt(e>>>6&63),n>=1?"=":o.charAt(63&e)];return r.join("")},l=t.btoa?function(n){return t.btoa(n)}:function(t){return t.replace(/[\s\S]{1,3}/g,f)},d=n?function(t){return(t.constructor===n.constructor?t:new n(t)).toString("base64")}:function(t){return l(s(t))},h=function(t,n){return n?d(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):d(String(t))},p=function(t){return h(t,!0)},g=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),v=function(t){switch(t.length){case 4:var n=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),e=n-65536;return u((e>>>10)+55296)+u((1023&e)+56320);case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},w=function(t){return t.replace(g,v)},y=function(t){var n=t.length,e=n%4,r=(n>0?i[t.charAt(0)]<<18:0)|(n>1?i[t.charAt(1)]<<12:0)|(n>2?i[t.charAt(2)]<<6:0)|(n>3?i[t.charAt(3)]:0),o=[u(r>>>16),u(r>>>8&255),u(255&r)];return o.length-=[0,0,2,1][e],o.join("")},m=t.atob?function(n){return t.atob(n)}:function(t){return t.replace(/[\s\S]{1,4}/g,y)},_=n?function(t){return(t.constructor===n.constructor?t:new n(t,"base64")).toString()}:function(t){return w(m(t))},A=function(t){return _(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},b=function(){var n=t.Base64;return t.Base64=e,n};if(t.Base64={VERSION:r,atob:m,btoa:l,fromBase64:A,toBase64:h,utob:s,encode:h,encodeURI:p,btou:w,decode:A,noConflict:b},"function"==typeof Object.defineProperty){var C=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",C(function(){return A(this)})),Object.defineProperty(String.prototype,"toBase64",C(function(t){return h(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",C(function(){return h(this,!0)}))}}}(this),this.Meteor&&(Base64=global.Base64),function(){window.Aac=function(){function t(t){var n,e,r,o,i;for(this.data={},e=t.split(/;\s?/),o=0,i=e.length;i>o;o++)n=e[o],r=n.split("="),this.data[r[0]]=r[1]}return t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,n,e){var r;return null==e&&(e=null),this.data[t]=n,r=t+"="+n,e&&(r+="; expires="+e),document.cookie=r},t}()}.call(this),function(){window.Aaq=function(){function t(t){var n,e,r;for(null==t&&(t=[]),this.events=[],e=0,r=t.length;r>e;e++)n=t[e],this.push(n);this.timeout=null}return t.prototype.push=function(t){var n,e;return this.events.push(t),clearTimeout(this.timeout),e=this,n=function(){return e.sendEvents()},this.timeout=setTimeout(n,100)},t.prototype.sendEvents=function(){var t,n,e,r,o,i;return i=[this.events,[]],e=i[0],this.events=i[1],r=function(){var r,o,i;for(i=[],r=0,o=e.length;o>r;r++)n=e[r],t="page_view"===n.event_type?new PageViewEvent(n):new TrackingEvent(n),i.push(t.attributes());return i}(),o=new NaviImageTransport,o.send("events",r)},t}()}.call(this),function(){window.Acc=function(){function t(t){var n,e,r;for(null==t&&(t=[]),e=0,r=t.length;r>e;e++)n=t[e],this.push(n)}return t.prototype.push=function(t){var n,e,r,o,i,u,a;for(e=new Date,e.setMinutes(e.getMinutes()+30),n=["campaign","source","medium","term","content"],a=[],i=0,u=n.length;u>i;i++)r=n[i],o=t[r],a.push(o?_aac.set(r,o,e.toUTCString()):void 0);return a},t}()}.call(this),function(){window.Aud=function(){function t(t){var n,e,r,o;for(null==t&&(t=[]),this.attrs={},n=!1,r=0,o=t.length;o>r;r++)e=t[r],this.push(e,!1),n=!0;n&&this.persist()}return t.prototype.attributes=function(){return this.attrs},t.prototype.push=function(t,n){var e,r;null==n&&(n=!0);for(e in t)r=t[e],this.attrs[e]=r;return n?this.persist():void 0},t.prototype.clear=function(){return this.attrs={},this.persist()},t.prototype.persist=function(){var t;return t=new NaviImageTransport,t.send("session_data",this.attrs)},t}()}.call(this),function(){var t=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;window.TrackingEvent=function(){function t(t){this.attrs=t}return t.prototype.attributes=function(){return this.attrs},t}(),window.PageViewEvent=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return t(e,n),e.prototype.attributes=function(){var t,n,r,o,i,u;for(t=e.__super__.attributes.apply(this,arguments),t.url=t.url||window.location.href,t.referrer=t.referrer||document.referrer,t.referrer.length>500&&(t.referrer=t.referrer.substring(0,499)+"..."),t.bad_random=uuid()===uuid(),t.http_status=t.http_status||200,n=["campaign","source","medium","term","content"],i=0,u=n.length;u>i;i++)r=n[i],o=_aac.get(r),o&&(t[r]=o);return t},e}(TrackingEvent)}.call(this),function(){window.NaviAjaxTransport=function(){function t(){}return t.prototype.send=function(t,n){var e,r;return r=Base64.encode(JSON.stringify(n)),e={render_instance_guid:render_instance_guid,url:window.location.href},e[t]=r,console.log(document.cookie),$.post("//aa.avvo.com/1/collect",e)},t}()}.call(this),function(){window.NaviImageTransport=function(){function t(t){null==t&&(t=!1),this.retry=t,this.maxLength=parseInt(_aac.get("maxLength"))||3900}return t.prototype.send=function(n,e){var r,o,i,u;return r=Base64.encode(JSON.stringify(e)),r.length>this.maxLength?e.splice&&e.length>1?(i=e.splice(0,Math.ceil(e.length/2)),this.send(n,i),this.send(n,e)):(console.log(e),console.log("error sending data - too big")):(o=document.createElement("img"),this.retry||(o.onerror=function(){var r;return _aac.set("maxLength","925"),r=new t(!0),r.send(n,e)}),u="//aa.avvo.com/1/collect?render_instance_guid="+render_instance_guid+"&retry="+this.retry+"&"+n+"="+r,o.setAttribute("src",u))},t}()}.call(this),function(){window.NaviTransport=function(){function t(){}return t.prototype.send=function(t,n){var e;return"undefined"!=typeof $?(e=new NaviAjaxTransport,e.send(t,n)):(e=new NaviImageTransport,e.send(t,n))},t}()}.call(this),function(){window.render_instance_guid||(window.render_instance_guid=uuid()),window._aac=new Aac(document.cookie),window._acc=new Acc(window._acc||[]),window._aud=new Aud(window._aud||[]),window._aaq=new Aaq(window._aaq||[])}.call(this);